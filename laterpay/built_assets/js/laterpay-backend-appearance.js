!function(o){o(function(){function t(){var t={savePurchaseForm:o(".lp_js_savePurchaseForm"),cancelFormEdit:o(".lp_js_cancelEditingPurchaseForm"),restoreDefaults:o(".lp_js_restoreDefaultPurchaseForm"),buttonGroupButtons:".lp_js_buttonGroupButton",buttonGroupHint:".lp_js_buttonGroupHint",overlayOptions:".lp_js_overlayOptions",overlayShowFooter:".lp_js_overlayShowFooter",selected:"lp_is-selected",showHintOnTrue:"lp_js_showHintOnTrue",headerBgColor:"lp_js_purchaseHeaderBackgroundColor",headerTitle:"lp_js_purchaseHeaderTitle",purchaseBgColor:"lp_js_purchaseBackgroundColor",purchaseMainText:"lp_js_purchaseMainTextColor",purchaseDescription:"lp_js_purchaseDescriptionTextColor",buttonBgColor:"lp_js_purchaseButtonBackgroundColor",buttonHoverColor:"lp_js_purchaseButtonHoverColor",buttonTextColor:"lp_js_purchaseButtonTextColor",linkMainColor:"lp_js_purchaseLinkMainColor",linkHoverColor:"lp_js_purchaseLinkHoverColor",footerBgColor:"lp_js_purchaseFooterBackgroundColor",showFooter:"lp_js_overlayShowFooter",overlayHeader:".lp_purchase-overlay__header",overlayForm:".lp_purchase-overlay__form",overlayOptionTitle:".lp_purchase-overlay-option__title",overlayDescription:".lp_purchase-overlay-option__description",overlayLink:".lp_purchase-overlay__notification",overlayButton:".lp_purchase-overlay__submit",overlayFooter:".lp_purchase-overlay__footer",previewSwitch:o("#lp_js_paidContentPreview").find(".lp_js_switchButtonGroup"),purchaseForm:o("#lp_js_purchaseForm"),purchaseButtonForm:o("#lp_js_purchaseButton"),purchaseButtonSwitch:o("#lp_js_purchaseButton").find(".lp_js_switchButtonGroup"),timePassesForm:o("#lp_js_timePasses"),timePassesSwitch:o("#lp_js_timePasses").find(".lp_js_switchButtonGroup"),appearance_loading:o("#lp_appearance_loading"),appearance_preview:o("#lp_appearance_preview"),show_purchase_button:o("#lp_show_purchase_button_above_article"),purchase_button_custom:o("#lp_purchase_button_custom_positioned"),purchase_button_hint:o("#lp_purchase_button_hint"),backend_purchase_button:o("#lp_backend_purchase_button"),show_purchase_overlay:o("#lp_show_purchase_overlay"),purchase_overlay:o("#lp_purchase_overlay"),overlay_body:o("#lp_overlay_body"),purchase_link:o("#lp_purchase_link"),explanatory_button:o("#lp_explanatory_button"),timePassWidget:o("#lp_js_timePassWidget"),timepass_widget_hint:o("#lp_timepass_widget_hint"),section_header_text:o("#lp_header_text"),purchase_header:o("#lp_purchase_header"),show_introduction:o("#lp_show_introduction"),benefits_section:o("#lp_benefits"),benefits_list:o("#lp_benefits_list"),show_tp_sub_below_modal:o("#lp_show_tp_sub_below_modal"),tp_sub_custom_positioned:o("#lp_is_tp_sub_custom_positioned"),show_body_text:o("#lp_show_body_text"),body_text_content:o("#lp_body_text_content"),body_text_content_holder:o("#lp_body_text_content_holder"),show_footer:o("#lp_show_footer"),overlay_footer:o("#lp_overlay_footer"),savePurchaseFormColors:o(".lp_js_savePurchaseFormColors"),overlayLinkNotification:o(".lp_bought_notification"),lp_purchase_button:o(".lp_purchase_button"),lp_purchase_button_tp:o(".lp_purchase-button"),navigation:o(".lp_navigation"),flip:o("a.lp_js_flipTimePass, a.lp_js_flipSubscription"),config_disclaimer:o("#lp_config_disclaimer")},e=function(){t.flip.on("click",function(o){o.preventDefault(),l(this)}),t.purchaseButtonSwitch.click(function(){n(o(this))}),t.timePassesSwitch.click(function(){s(o(this))}),o(t.overlayOptions).change(function(){i(o(this))}),o(t.overlayShowFooter).click(function(){_(o(this))}),t.savePurchaseForm.click(function(t){t.preventDefault();var e=o(this).parents("form");o("input[name=form]",e).val("appearance_config");var r={lp_show_purchase_button_above_article:"Purchase Button",lp_purchase_button_custom_positioned:"Purchase Button Custom Position",lp_show_purchase_overlay:"Purchase Overlay",lp_show_introduction:"LP Intro",lp_show_tp_sub_below_modal:"TP & Sub Outside Overlay",lp_is_tp_sub_custom_positioned:"TP & Sub Custom Position",lp_show_body_text:"Custom HTML",lp_show_footer:"Footer"};o('input[type="checkbox"]').each(function(){var t=r[o(this).attr("id")];if("undefined"!=typeof t){var e=lpVars.gaData.sandbox_merchant_id+" | "+t,a=o(this).prop("checked")?1:0;lpGlobal.sendLPGAEvent("Update Appearance","LP WP Appearance",e,a)}}),lpGlobal.sendLPGAEvent("Update Colors","LP WP Appearance",lpVars.gaData.sandbox_merchant_id),c(e)}),t.savePurchaseFormColors.click(function(t){t.preventDefault();var e=o(this).parents("form");o("input[name=form]",e).val("overlay_settings"),c(e)}),t.cancelFormEdit.click(function(o){o.preventDefault(),h(lpVars.overlaySettings.current)}),t.restoreDefaults.click(function(o){o.preventDefault(),h(lpVars.overlaySettings["default"])}),t.show_purchase_button.change(function(){o(this).prop("checked")?(o(this).val(1),t.purchase_button_custom.parent().show(),t.backend_purchase_button.show()):(o(this).val(0),t.purchase_button_custom.parent().hide(),t.backend_purchase_button.hide()),o(this).prop("checked")&&t.purchase_button_custom.prop("checked")?t.purchase_button_hint.show():t.purchase_button_hint.hide(),a()}),t.purchase_button_custom.change(function(){o(this).prop("checked")?(o(this).val(1),t.purchase_button_hint.show()):(o(this).val(0),t.purchase_button_hint.hide())}),t.show_purchase_overlay.change(function(){o(this).prop("checked")?(o(this).val(1),t.purchase_overlay.show(),t.purchase_header.parent().css("visibility","visible"),t.show_introduction.parent().css("visibility","visible"),t.show_body_text.parent().css("visibility","visible"),t.show_footer.parent().css("visibility","visible")):(o(this).val(0),t.purchase_overlay.hide(),t.purchase_header.parent().css("visibility","hidden"),t.show_introduction.parent().css("visibility","hidden"),t.show_body_text.parent().css("visibility","hidden"),t.show_footer.parent().css("visibility","hidden")),a()}),t.purchase_header.on("change paste keyup",function(){t.section_header_text.text(o(this).val())}),t.show_introduction.change(function(){o(this).prop("checked")?(o(this).val(1),t.purchase_overlay.attr("style","min-height:500px !important"),t.benefits_section.show(),t.benefits_list.show()):(o(this).val(0),t.purchase_overlay.attr("style","min-height:330px !important"),t.benefits_list.hide())}),t.show_tp_sub_below_modal.change(function(){o(this).prop("checked")?(o(this).val(1),t.overlay_body.hide(),t.timePassWidget.show(),t.show_purchase_overlay.prop("checked")||t.purchase_link.show(),t.explanatory_button.show(),t.tp_sub_custom_positioned.parent().show(),t.tp_sub_custom_positioned.trigger("change")):(o(this).val(0),t.overlay_body.show(),t.timePassWidget.hide(),t.purchase_link.hide(),t.explanatory_button.hide(),t.tp_sub_custom_positioned.parent().hide(),t.timepass_widget_hint.hide()),a()}),t.show_body_text.change(function(){o(this).prop("checked")?(o(this).val(1),t.body_text_content_holder.empty().append(t.body_text_content.val()),t.body_text_content.show(),t.body_text_content_holder.show()):(o(this).val(0),t.body_text_content.hide(),t.body_text_content_holder.hide())}),t.body_text_content.on("change paste keyup",function(){t.body_text_content_holder.empty().append(o(this).val())}),t.show_footer.change(function(){o(this).prop("checked")?(o(this).val(1),t.overlay_footer.show()):(o(this).val(0),t.overlay_footer.hide())}),t.tp_sub_custom_positioned.change(function(){o(this).prop("checked")?(o(this).val(1),t.timepass_widget_hint.show()):(o(this).val(0),t.timepass_widget_hint.hide())})},r=function(){t.show_purchase_button.trigger("change"),t.purchase_button_custom.trigger("change"),t.show_purchase_overlay.trigger("change"),t.purchase_header.trigger("change"),t.show_introduction.trigger("change"),t.show_tp_sub_below_modal.trigger("change"),t.show_body_text.trigger("change"),t.body_text_content_holder.trigger("change"),t.show_footer.trigger("change"),t.tp_sub_custom_positioned.trigger("change")},a=function(){var o=!1;return t.show_purchase_button.prop("checked")||t.show_purchase_overlay.prop("checked")||t.show_tp_sub_below_modal.prop("checked")?!t.show_purchase_button.prop("checked")||t.show_purchase_overlay.prop("checked")||t.show_tp_sub_below_modal.prop("checked")||(o=!0,t.show_purchase_button.removeClass("recommended_option"),t.show_purchase_overlay.addClass("recommended_option"),t.show_tp_sub_below_modal.addClass("recommended_option")):(o=!0,t.show_purchase_button.addClass("recommended_option"),t.show_purchase_overlay.addClass("recommended_option"),t.show_tp_sub_below_modal.addClass("recommended_option")),o?(t.navigation.showMessage(lpVars.invalidConfigError,!1),t.savePurchaseForm.attr("disabled",!0),void t.config_disclaimer.show()):(t.show_purchase_button.removeClass("recommended_option"),t.show_purchase_overlay.removeClass("recommended_option"),t.show_tp_sub_below_modal.removeClass("recommended_option"),t.savePurchaseForm.attr("disabled",!1),void t.config_disclaimer.hide())},n=function(e){var r=e.parents("form");switch(o(t.buttonGroupButtons,r).removeClass(t.selected),e.parent(t.buttonGroupButtons).addClass(t.selected),o("input:checked",r).val()){case"0":r.find(t.buttonGroupHint).fadeOut();break;case"1":r.find(t.buttonGroupHint).fadeIn()}c(r)},s=function(e){var r=e.parents("form");switch(o(t.buttonGroupButtons,r).removeClass(t.selected),e.parent(t.buttonGroupButtons).addClass(t.selected),o("input:checked",r).val()){case"0":r.find(t.buttonGroupHint).fadeOut();break;case"1":r.find(t.buttonGroupHint).fadeIn()}c(r)},i=function(e){var r,a;if(e.hasClass(t.headerBgColor)&&(r="background-color: "+o("."+t.headerBgColor).val()+" !important;",p(t.overlayHeader,r)),e.hasClass(t.headerTitle)&&o(t.overlayHeader).text(o("."+t.headerTitle).val()),e.hasClass(t.purchaseBgColor)&&(r="background-color: "+o("."+t.purchaseBgColor).val()+" !important;",p(o(t.overlayForm),r)),e.hasClass(t.purchaseMainText)&&(r="color: "+o("."+t.purchaseMainText).val()+" !important;",p(o(t.overlayOptionTitle),r)),e.hasClass(t.purchaseDescription)&&(r="color: "+o("."+t.purchaseDescription).val()+" !important;",p(o(t.overlayDescription),r)),e.hasClass(t.buttonBgColor)){var n="color:"+o("."+t.buttonTextColor).val()+" !important;",s=o("."+t.buttonBgColor).val();r="background-color: "+s+" !important;",p(o(t.overlayButton),r+n),p(o(t.lp_purchase_button),r+n),p(o(t.lp_purchase_button_tp),r+n),t.flip.length&&(a="color:"+s+" !important;",p(t.flip,a))}if(e.hasClass(t.buttonTextColor)){var i="background-color:"+o("."+t.buttonBgColor).val()+" !important;";r="color: "+o("."+t.buttonTextColor).val()+" !important;",p(o(t.overlayButton),r+i),p(o(t.lp_purchase_button),r+i),p(o(t.lp_purchase_button_tp),r+i)}e.hasClass(t.buttonHoverColor)&&(o(t.overlayButton).hover(function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonHoverColor).val()+" !important;",p(o(t.overlayButton),r+a)},function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonBgColor).val()+" !important;",p(o(t.overlayButton),r+a)}),o(t.lp_purchase_button).hover(function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonHoverColor).val()+" !important;",p(o(t.lp_purchase_button),r+a)},function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonBgColor).val()+" !important;",p(o(t.lp_purchase_button),r+a)}),o(t.lp_purchase_button_tp).hover(function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonHoverColor).val()+" !important;",p(o(t.lp_purchase_button_tp),r+a)},function(){a="color:"+o("."+t.buttonTextColor).val()+" !important;",r="background-color: "+o("."+t.buttonBgColor).val()+" !important;",p(o(t.lp_purchase_button_tp),r+a)})),e.hasClass(t.linkMainColor)&&(r="color: "+o("."+t.linkMainColor).val()+" !important;",p(o(t.overlayLink+" a"),r),p(o(t.overlayLink),r),o(t.overlayLinkNotification).length&&p(o(t.overlayLinkNotification),r)),e.hasClass(t.linkHoverColor)&&(o(t.overlayLink+" a").hover(function(){r="color: "+o("."+t.linkHoverColor).val()+" !important;",p(o(t.overlayLink+" a"),r)},function(){r="color: "+o("."+t.linkMainColor).val()+" !important;",p(o(t.overlayLink+" a"),r)}),o(t.overlayLinkNotification).hover(function(){r="color: "+o("."+t.linkHoverColor).val()+" !important;",p(o(t.overlayLinkNotification),r)},function(){r="color: "+o("."+t.linkMainColor).val()+" !important;",p(o(t.overlayLinkNotification),r)})),e.hasClass(t.footerBgColor)&&(r="background-color: "+o("."+t.footerBgColor).val()+" !important;",o(t.overlayFooter).is(":hidden")&&(r+="display: none;"),p(o(t.overlayFooter),r))},l=function(t){o(t).parents(".lp_time-pass").toggleClass("lp_is-flipped")},_=function(e){e.is(":checked")?o(t.overlayFooter).show():o(t.overlayFooter).hide()},c=function(t){o.post(ajaxurl,t.serializeArray(),function(t){o(".lp_navigation").showMessage(t)})},p=function(t,e){o(t).attr("style",e)},h=function(e){o("."+t.headerBgColor).val(e.header_bg_color).change(),o("."+t.headerTitle).val(e.header_title).change(),o("."+t.purchaseBgColor).val(e.main_bg_color).change(),o("."+t.purchaseMainText).val(e.main_text_color).change(),o("."+t.purchaseDescription).val(e.description_color).change(),o("."+t.buttonBgColor).val(e.button_bg_color).change(),o("."+t.buttonHoverColor).val(e.button_hover_color).change(),o("."+t.buttonTextColor).val(e.button_text_color).change(),o("."+t.linkMainColor).val(e.link_main_color).change(),o("."+t.linkHoverColor).val(e.link_hover_color).change(),o("."+t.footerBgColor).val(e.footer_bg_color).change(),!0===e.show_footer?o("."+t.showFooter).attr("checked","checked"):o("."+t.showFooter).removeAttr("checked")},u=function(){e(),r(),t.appearance_loading.fadeOut(500),t.appearance_preview.delay(500).fadeIn(800)};u()}t()})}(jQuery);