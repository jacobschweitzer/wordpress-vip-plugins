!function(e){e(function(){function n(){var n={lp_ga_element:e("#lp_ga_tracking"),pricing:{setGlobalPrice:e("#lp_js_saveGlobalDefaultPrice")},wp_body_content:e("#wpbody-content"),backendPage:e(".lp_page"),close_update_notice:e("#close_update_notice"),close_info_notice:e("#close_info_notice"),navigation:e(".lp_navigation")},t=function(){n.backendPage.add(n.wp_body_content).on("click",n.close_update_notice,function(t){"close_update_notice"===t.target.id&&e.post(lpCommonVar.ajaxUrl,{action:"laterpay_reset_highlights_data",security:lpCommonVar.update_highlights_nonce},function(e){e.success&&(n.backendPage.find("div.lp_update_notification").remove(),n.wp_body_content.length&&n.wp_body_content.find("div.lp_update_notification").remove())},"json")}),n.backendPage.on("click",n.close_info_notice,function(t){"close_info_notice"===t.target.id&&e.post(lpCommonVar.ajaxUrl,{action:"laterpay_read_tabular_instructions",security:lpCommonVar.read_tabular_nonce,lppage:lpCommonVar.current_page},function(e){e.success&&n.backendPage.find("div.lp_info_notification").remove()},"json")})},o=function(e){document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"},a=function(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0},r=function(e){if(!0===e)return function(e,n,t,o,a,r,l){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,r=n.createElement(t),l=n.getElementsByTagName(t)[0],r.async=1,r.src=o,l.parentNode.insertBefore(r,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","lpga"),window[window.GoogleAnalyticsObject||"lpga"]},l=function(e,n,t,o,a,l){var i=r(e);"function"==typeof i&&(i("create",lpCommonVar.lp_tracking_id,"auto","lpParentTracker"),i("lpParentTracker.send","event",{eventCategory:o,eventAction:t,eventLabel:n,eventValue:a,nonInteraction:l}))},i=function(e,n,t,o,a,l){var i=r(e);"function"==typeof i&&(i("create",lpCommonVar.lp_user_tracking_id,"auto","lpUserTracker"),i("lpUserTracker.send","event",{eventCategory:o,eventAction:t,eventLabel:n,eventValue:a,nonInteraction:l}))},c=function(){if("1"===a("lp_ga_purchased")){var e=lpCommonVar.postTitle+","+lpCommonVar.blogName+","+lpCommonVar.postPermalink;lpGlobal.sendLPGAEvent("Paid Content Purchase Complete","LaterPay WordPress Plugin",e),o("lp_ga_purchased")}},p=function(){if("boolean"==typeof window.mi_track_user&&!0===window.mi_trac_user)return window[window.GoogleAnalyticsObject||"__gaTracker"]},s=function(e,n,t,o,a,r,l,i){e("create",n,"auto",t),e(t+".send","event",{eventCategory:r,eventAction:o,eventLabel:a,eventValue:l,nonInteraction:i})},_=function(e,n){var t=864e5,o=e-n;return parseFloat(o/t)},m=function(e,n){g()&&localStorage.setItem(e,n)},u=function(e){if(g())return localStorage.getItem(e)},d=function(){var e,n,t,o,a="",r=lpCommonVar.sandbox_merchant_id+" | ";e=r+"Count Category Prices",n=r+"Count Time Passes",t=r+"Count Subscriptions",o=r+lpCommonVar.lp_current_version,a=lpCommonVar.sb_merchant_id+" | "+lpCommonVar.live_merchant_id+" | "+lpCommonVar.site_url+" | "+lpCommonVar.lp_plugin_status;var l="LP WP Pricing",i="Pricing Summary";lpGlobal.sendLPGAEvent(i,l,e,lpCommonVar.categories_count,!0),lpGlobal.sendLPGAEvent(i,l,n,lpCommonVar.time_passes_count,!0),lpGlobal.sendLPGAEvent(i,l,t,lpCommonVar.subscriptions_count,!0),lpGlobal.sendLPGAEvent(i,l,o,0,!0),lpGlobal.sendLPGAEvent("Account Status Summary",l,a,0,!0),m("lpSummarySentDate",Date.now())},g=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},f=function(){if("settings"!==lpCommonVar.current_page&&Object.keys(lpCommonVar.update_highlights).length){var t=e("<div/>",{"class":"lp_update_notification"}),o=e("<b/>",{text:lpCommonVar.update_highlights.version}),a=e("<p/>",{text:lpCommonVar.update_highlights.notice}),r=e("<a/>",{"class":"lp_purchase-overlay__submit",href:"https://wordpress.org/plugins/laterpay/#developers",text:lpCommonVar.learn_more,target:"_blank"}),l=e("<a/>",{"class":"close_notice",id:"close_update_notice"}).attr("data-icon","e").css("cursor","pointer");a.prepend(o),t.append(a),t.append(r),t.append(l),"advanced"!==lpCommonVar.current_page&&n.wp_body_content.length?n.wp_body_content.prepend(t):e("#lp_js_flashMessage").after(t)}},v=function(){if("settings"!==lpCommonVar.current_page&&Object.keys(lpCommonVar.lp_instructional_info).length){if("undefined"==typeof lpCommonVar.lp_instructional_info[lpCommonVar.current_page])return;var t=e("<div/>",{"class":"lp_info_notification"});if(t.append(lpCommonVar.lp_instructional_info[lpCommonVar.current_page]),"pricing"===lpCommonVar.current_page){var o=e("<a/>",{"class":"lp_purchase-overlay__submit",href:"https://www.laterpay.net/academy/wordpress-pricing",text:lpCommonVar.learn_more,target:"_blank"});t.append(o)}var a=e("<a/>",{"class":"close_info",id:"close_info_notice"}).attr("data-icon","e").css("cursor","pointer");t.append(a),n.navigation.after(t)}},C=function(){if("undefined"!=typeof lpCommonVar&&"pricing"===lpCommonVar.current_page)if(g()){var o=u("lpSummarySentDate");(_(Date.now(),o)>1||null===o)&&(d(),localStorage.setItem("lpSummarySentDate",Date.now()))}else d();if(c(),e(n.lp_ga_element).length>=1){var a=lpCommonVar.postTitle+","+lpCommonVar.blogName+","+lpCommonVar.postPermalink,r="LaterPay WordPress Plugin";lpGlobal.sendLPGAEvent("Paid Content Replacement Show",r,a,0,!0)}f(),v(),t()};window.lpGlobal={sendLPGAEvent:function(e,n,t,o,a){"undefined"==typeof a&&(a=!1);var r=!1,c=p(),_="",m=lpCommonVar.lp_user_tracking_id,u=lpCommonVar.lp_tracking_id;m.length>0&&u.length>0?"function"==typeof c?(_=c.getAll(),_.forEach(function(l){if(m===l.get("trackingId")){r=!0;var i=l.get("name");c(i+".send","event",{eventCategory:n,eventAction:e,eventLabel:t,eventValue:o,nonInteraction:a})}}),!0===r?s(u,"lpParentTracker",e,t,n,o,a):(s(c,u,"lpParentTracker",e,t,n,o,a),s(c,m,"lpUserTracker",e,t,n,o,a))):(l(!0,t,e,n,o,a),i(!0,t,e,n,o,a)):m.length>0&&0===u.length?"function"==typeof c?(_=c.getAll(),_.forEach(function(l){if(m===l.get("trackingId")){r=!0;var i=l.get("name");c(i+".send","event",{eventCategory:n,eventAction:e,eventLabel:t,eventValue:o,nonInteraction:a})}}),!0!==r&&i(!0,t,e,n,o,a)):i(!0,t,e,n,o,a):0===m.length&&u.length>0&&("function"==typeof c?s(c,u,"lpParentTracker",e,t,n,o,a):l(!0,t,e,n,o,a))}},C()}n()})}(jQuery);